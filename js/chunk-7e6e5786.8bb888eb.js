(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e6e5786"],{1799:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.childPagination.has_pre},on:{click:function(e){return e.preventDefault(),t.pageComponent(t.childPagination.current_page-1)}}},[t._m(0)]),t._l(t.childPagination.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.childPagination.current_page===a},on:{click:function(e){return e.preventDefault(),t.pageComponent(a)}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:!t.childPagination.has_next},on:{click:function(e){return e.preventDefault(),t.pageComponent(t.childPagination.current_page+1)}}},[t._m(1)])],2)])])},r=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])}],i={props:{childPagination:{type:Object}},methods:{pageComponent(t){this.$emit("changePage",t)}}},n=i,o=a("2877"),d=Object(o["a"])(n,s,r,!1,null,null,null);e["a"]=d.exports},7307:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[t.isLoading?e("div",{staticClass:"loading"},[e("div",{staticClass:"loading-item fas fas fa-apple-alt"}),e("div",{staticClass:"loading-item fas fa-lemon"}),e("div",{staticClass:"loading-item fas fa-carrot"})]):t._e(),e("div",{staticClass:"container pt-5"},[e("table",{staticClass:"table mt-5"},[t._m(0),e("tbody",t._l(t.sortOrder,(function(a,s){return e("tr",{key:s,class:{"text-secondary":!a.is_paid}},[e("td",[t._v(t._s(t._f("date")(a.create_at)))]),e("td",[a.user?e("span",{domProps:{textContent:t._s(a.user.email)}}):t._e()]),e("td",[e("ul",{staticClass:"list-unstyled"},t._l(a.products,(function(a,s){return e("li",{key:s},[t._v(" "+t._s(a.product.title)+" (數量："+t._s(a.qty)+") ")])})),0)]),e("td",[t._v(t._s(t._f("currency")(a.total)))]),e("td",[a.is_paid?e("strong",{staticClass:"text-success"},[t._v("已付款")]):e("span",{staticClass:"text-muted"},[t._v("尚未起用")])]),e("td",[e("button",{staticClass:"btn btn-outline-danger",on:{click:function(e){return t.openCouponModal(a)}}},[t._v("修改")])])])})),0)]),e("div",{staticClass:"modal fade",attrs:{id:"ordersModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name"}},[t._v("姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.name,expression:"tempOrder.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"請輸入姓名"},domProps:{value:t.tempOrder.user.name},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"name",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("信箱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.email,expression:"tempOrder.user.email"}],staticClass:"form-control",attrs:{type:"email",id:"email",placeholder:"請輸入email"},domProps:{value:t.tempOrder.user.email},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"email",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"address"}},[t._v("地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.address,expression:"tempOrder.user.address"}],staticClass:"form-control",attrs:{type:"text",id:"address",placeholder:"請輸入地址"},domProps:{value:t.tempOrder.user.address},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"address",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("h4",{staticClass:"text-info"},[t._v("總價"+t._s(t.tempOrder.total))])]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.is_paid,expression:"tempOrder.is_paid"}],staticClass:"form-check-input",attrs:{type:"checkbox","true-value":1,"false-value":0,id:"is_paid"},domProps:{checked:Array.isArray(t.tempOrder.is_paid)?t._i(t.tempOrder.is_paid,null)>-1:t._q(t.tempOrder.is_paid,1)},on:{change:function(e){var a=t.tempOrder.is_paid,s=e.target,r=s.checked?1:0;if(Array.isArray(a)){var i=null,n=t._i(a,i);s.checked?n<0&&t.$set(t.tempOrder,"is_paid",a.concat([i])):n>-1&&t.$set(t.tempOrder,"is_paid",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.tempOrder,"is_paid",r)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_paid"}},[t._v("確認是否付款")])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateOrders}},[t._v("更新訂單")])])])])]),e("Pagination",{attrs:{childPagination:t.pagination},on:{changePage:t.getOrders}})],1)])},r=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("購買時間")]),e("th",[t._v("Email")]),e("th",[t._v("購買款項")]),e("th",[t._v("應付金額")]),e("th",[t._v("是否付款")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("訂單資訊")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],i=a("1157"),n=a.n(i),o=a("1799"),d={components:{Pagination:o["a"]},data(){return{orders:{},tempOrder:{id:"",create_at:0,is_paid:0,message:"",payment_method:"",qty:1,total:100,user:{}},pagination:{},isLoading:!1}},methods:{getOrders(t=1){const e="https://vue-course-api.hexschool.io/api/secret78510/admin/orders?page="+t;this.isLoading=!0,this.$http.get(e,this.tempProducts).then(t=>{this.orders=t.data.orders,this.pagination=t.data.pagination,this.isLoading=!1})},updateOrders(){const t="https://vue-course-api.hexschool.io/api/secret78510/admin/order/"+this.tempOrder.id;this.$http.put(t,{data:this.tempOrder}).then(()=>{n()("#ordersModal").modal("hide"),this.getOrders()})},openCouponModal(t){n()("#ordersModal").modal("show"),this.tempOrder=JSON.parse(JSON.stringify(t))}},computed:{sortOrder(){const t=this;let e=[];return t.orders.length&&(e=t.orders.sort((t,e)=>{const a=t.is_paid?1:0,s=e.is_paid?1:0;return s-a})),e}},created(){this.getOrders()}},l=d,c=a("2877"),p=Object(c["a"])(l,s,r,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-7e6e5786.8bb888eb.js.map